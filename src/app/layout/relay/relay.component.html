<div class="row">
  <div class="col-md-12">
    <br>
    <!-- RELAY CARD -->
    <div *ngFor="let node of nodes; let nodeI = index" class="card" style="width: 20rem;">
      
      <div class="card-header">
        <h4 class="card-title">
          <span *ngIf="!edits[nodeI]">{{node.name}}</span>
          <input *ngIf="edits[nodeI]" type="text" [(ngModel)]="node.name">
          <button class="btn btn-sm btn-secondary" (click)="off(node)">All Off!</button>
          <button class="btn btn-sm btn-secondary" (click)="on(node)">All On</button><br>
          <button *ngIf="!edits[nodeI]" class="btn btn-sm btn-secondary" (click)="edits[nodeI] = true">Edit</button>
          <button *ngIf="edits[nodeI]" class="btn btn-sm btn-secondary" (click)="cancel(node)">Cancel</button>
          <button *ngIf="edits[nodeI]" class="btn btn-sm btn-secondary" (click)="save(node)">Save</button>
        </h4>
      </div>

      <div class="card-block">
        <div *ngFor="let module of node.modules">
          <div *ngIf="module.channels">
            <div *ngFor="let channel of module.channels; let channelI = index">
              <label *ngIf="!edits[nodeI]">{{channel.name}}</label>
              <input *ngIf="edits[nodeI]" type="text" [(ngModel)]="channel.name">
              <button class="btn btn-sm btn-secondary" [class.on]="channel.isOn" [class.off]="!channel.isOn" (click)="toggle(node, channelI)"><i class="fa fa-power-off" aria-hidden="true"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>